source: MOTHERDUCK
target: BIGQUERY

defaults:
  mode: incremental
  # IMPORTANT: The dataset name here must match your BIGQUERY_DATASET environment variable
  # Change "economic_data" below to match your dataset, or set BIGQUERY_DATASET=economic_data
  # Table name is derived from stream (e.g., main.stg_fred_series -> stg_fred_series)
  object: "economic_data.{stream_table}"

streams:
  # ============================================
  # Staging Models
  # ============================================
  main.stg_fred_series:
    primary_key: "series_name,date"
  
  main.stg_housing_inventory:
    primary_key: "date,region"
  
  main.stg_housing_pulse:
    primary_key: "date,region"
  
  main.stg_treasury_yields:
    primary_key: "date,maturity"
  
  main.stg_us_sectors:
    primary_key: "symbol,date"
  
  main.stg_currency:
    primary_key: "symbol,date"
  
  main.stg_major_indices:
    primary_key: "symbol,date"
  
  main.stg_fixed_income:
    primary_key: "symbol,date"
  
  main.stg_global_markets:
    primary_key: "symbol,date"
  
  main.stg_energy_commodities:
    primary_key: "symbol,date"
  
  main.stg_input_commodities:
    primary_key: "symbol,date"
  
  main.stg_agriculture_commodities:
    primary_key: "symbol,date"
  
  main.stg_realtor_country_history:
    primary_key: "date,country"
  
  main.stg_realtor_county_history:
    primary_key: "date,county"
  
  main.stg_realtor_metro_history:
    primary_key: "date,metro"
  
  main.stg_realtor_state_history:
    primary_key: "date,state"
  
  main.stg_realtor_zip_history:
    primary_key: "date,zip_code"

  # ============================================
  # Government Models
  # ============================================
  main.fred_series_grain:
    primary_key: "series_name,date"
  
  main.fred_series_latest_aggregates:
    primary_key: "series_name"
  
  main.fred_monthly_diff:
    primary_key: "series_name,date"
  
  main.fred_quarterly_roc:
    primary_key: "series_name,date"
  
  main.housing_inventory:
    primary_key: "date,region"
  
  main.housing_inventory_latest_aggregates:
    primary_key: "region"
  
  main.housing_inventory_and_population:
    primary_key: "date,region"
  
  main.housing_mortgage_rates:
    primary_key: "date"

  # ============================================
  # Markets Models
  # ============================================
  main.currency_summary:
    primary_key: "symbol"
  
  main.currency_analysis_return:
    primary_key: "symbol,month_date"
  
  main.us_sector_summary:
    primary_key: "symbol"
  
  main.us_sector_analysis_return:
    primary_key: "symbol,month_date"
  
  main.major_indicies_summary:
    primary_key: "symbol"
  
  main.major_indicies_analysis_return:
    primary_key: "symbol,month_date"
  
  main.fixed_income_analysis_return:
    primary_key: "symbol,month_date"
  
  main.global_markets_summary:
    primary_key: "symbol"
  
  main.global_markets_analysis_return:
    primary_key: "symbol,month_date"

  # ============================================
  # Commodities Models
  # ============================================
  main.energy_commodities_summary:
    primary_key: "symbol"
  
  main.energy_commodities_analysis_return:
    primary_key: "symbol,month_date"
  
  main.input_commodities_summary:
    primary_key: "symbol"
  
  main.input_commodities_analysis_return:
    primary_key: "symbol,month_date"
  
  main.agriculture_commodities_summary:
    primary_key: "symbol"
  
  main.agriculture_commodities_analysis_return:
    primary_key: "symbol,month_date"

  # ============================================
  # Analysis Models
  # ============================================
  main.base_historical_analysis:
    primary_key: "symbol,month_date,category"
  
  main.market_economic_analysis:
    primary_key: "symbol,month_date"
  
  main.leading_econ_return_indicator:
    primary_key: "date"

  # ============================================
  # Financial Conditions Index
  # ============================================
  main.financial_conditions_index:
    primary_key: "date"
